<div class="container mx-auto p-4">
  <div class="bg-blue-500 text-white p-4 mb-4">
    <span class="text-xl font-bold">Star Wars Characters</span>
  </div>

  <!-- Loader component shown while data is loading -->
  <app-loader *ngIf="loading"></app-loader>

  <div class="flex flex-wrap" *ngIf="!loading">
    <div class="w-full md:w-1/3 p-4">
      <div class="bg-white rounded-lg shadow-lg p-4">
        <h2 class="text-lg font-bold mb-4">Filters</h2>

        <div class="mb-4">
          <label class="block mb-1">Movie</label>
          <select
            [(ngModel)]="filter.movie"
            class="w-full border rounded-lg px-3 py-2"
          >
            <option value="">None</option>
            <!-- Add None option -->
            <option *ngFor="let film of films" [value]="film.url">
              {{ film.title }}
            </option>
          </select>
        </div>

        <div class="mb-4">
          <label class="block mb-1">Species</label>
          <select
            [(ngModel)]="filter.species"
            class="w-full border rounded-lg px-3 py-2"
          >
            <option value="">None</option>
            <!-- Add None option -->
            <option *ngFor="let specie of species" [value]="specie.url">
              {{ specie.name }}
            </option>
          </select>
        </div>

        <div class="mb-4">
          <label class="block mb-1">Vehicle</label>
          <select
            [(ngModel)]="filter.vehicle"
            class="w-full border rounded-lg px-3 py-2"
          >
            <option value="">None</option>
            <!-- Add None option -->
            <option *ngFor="let vehicle of vehicles" [value]="vehicle.url">
              {{ vehicle.name }}
            </option>
          </select>
        </div>

        <div class="mb-4">
          <label class="block mb-1">Starship</label>
          <select
            [(ngModel)]="filter.starship"
            class="w-full border rounded-lg px-3 py-2"
          >
            <option value="">None</option>
            <!-- Add None option -->
            <option *ngFor="let starship of starships" [value]="starship.url">
              {{ starship.name }}
            </option>
          </select>
        </div>

        <div class="mb-4">
          <label class="block mb-1">Birth Year</label>
          <select
            [(ngModel)]="filter.birthYear"
            class="w-full border rounded-lg px-3 py-2"
          >
            <option value="">All</option>
            <!-- Add None option -->
            <option *ngFor="let year of getBirthYears()">{{ year }}</option>
          </select>
        </div>

        <button
          (click)="applyFilter()"
          class="bg-blue-500 text-white py-2 px-4 rounded-lg"
        >
          Search
        </button>
      </div>
    </div>

    <div class="w-full md:w-2/3 p-4">
      <h2 class="text-lg font-bold mb-4">Search Results</h2>
      <div *ngIf="filteredCharacters.length > 0">
        <table class="w-full bg-white rounded-lg shadow-lg">
          <thead>
            <tr class="bg-gray-200">
              <th class="border px-4 py-2">S.No.</th>
              <th class="border px-4 py-2">Character Name</th>
              <th class="border px-4 py-2">Species</th>
              <th class="border px-4 py-2">Birth Year</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let character of filteredCharacters; let i = index"
              class="hover:bg-gray-100"
            >
              <td class="border px-4 py-2">{{ i + 1 }}</td>
              <td class="border px-4 py-2">
                <a [routerLink]="['/profile', character.url.split('/')[5]]">{{
                  character.name
                }}</a>
              </td>
              <td class="border px-4 py-2">{{ character.species | json }}</td>
              <td class="border px-4 py-2">{{ character.birth_year }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div
        *ngIf="filteredCharacters.length === 0"
        class="text-red-500 text-center mt-4"
      >
        No results found
      </div>
    </div>
  </div>
</div>
